paths:
  /studies/{studyDbId}/table:
    get:
      description: ' Scope: PHENOTYPING. Status: ACCEPTED. Implemented in Cassavabase, HIDAP and Germinate. Notes: Implementation target date: after PAG2016 Retrieve the details of the study required for field data collection. Includes actual trait data.

        <a href="https://test-server.brapi.org/brapi/v1/studies"> test-server.brapi.org/brapi/v1/studies/{studyDbId}/table</a>'
      parameters:
      - description: Identifier of the study. Usually a number, could be alphanumeric.
        in: path
        name: studyDbId
        required: true
        type: string
      - description: The format parameter will cause the data to be dumped to a file in the specified format. Currently, tsv and csv are supported.
        in: query
        name: format
        required: false
        type: string
      produces:
      - application/json
      - application/csv
      - application/tsv
      responses:
        '200':
          description: OK
          examples:
            application/csv: "year,studyDbId,studyName,locationDbId,locationName,germplasmDbId,germplasmName,observationUnitDbId,plotNumber,replicate,blockNumber,observationTimestamp,entryType,X,Y,variable1DbId,variable2DbId,variable3DbId\n2017,stu1,Study Name,loc1,Location Name,CIP1,CIP Name,abc123,1,1,1,2017-06-16T00:53:26Z,Test Entry,1,2,25.3,103.4,50.75 \n2017,stu1,Study Name,loc1,Location Name,CIP1,CIP Name,abc124,1,1,1,2017-06-16T00:54:57Z,Test Entry,2,2,27.9,98.65,45.345\n"
            application/json:
              metadata:
                datafiles: []
                pagination:
                  currentPage: 0
                  pageSize: 0
                  totalCount: 0
                  totalPages: 0
                status: []
              result:
                data:
                - - '2017'
                  - stu1
                  - Study Name
                  - loc1
                  - Location Name
                  - CIP1
                  - CIP Name
                  - abc123
                  - 1
                  - 1
                  - 1
                  - 2017-06-16T00:53:26Z //DEPRECATED
                  - Test Entry
                  - '1'
                  - '2'
                  - '25.3'
                  - '103.4'
                  - '50.75'
                - - '2017'
                  - stu1
                  - Study Name
                  - loc1
                  - Location Name
                  - CIP1
                  - CIP Name
                  - abc124
                  - 1
                  - 1
                  - 1
                  - 2017-06-16T00:54:57Z //DEPRECATED
                  - Test Entry
                  - '2'
                  - '2'
                  - '27.9'
                  - '98.65'
                  - '45.345'
                headerRow:
                - year
                - studyDbId
                - studyName
                - locationDbId
                - locationName
                - germplasmDbId
                - germplasmName
                - observationUnitDbId
                - plotNumber
                - replicate
                - blockNumber
                - observationTimestamp //DEPRECATED
                - entryType
                - X
                - Y
                observationVariableDbIds:
                - variable1DbId
                - variable2DbId
                - variable3DbId
                observationVariableNames:
                - plant height
                - fruit weight
                - root weight
            application/tsv: "year\tstudyDbId\tstudyName\tlocationDbId\tlocationName\tgermplasmDbId\tgermplasmName\tobservationUnitDbId\tplotNumber\treplicate\tblockNumber\tobservationTimestamp\tentryType\tX\tY\tvariable1DbId\tvariable2DbId\tvariable3DbId\n 2017\tstu1\tStudy Name\tloc1\tLocation Name\tCIP1\tCIP Name\tabc123\t1\t1\t1\t2017-06-16T00:53:26Z\tTest Entry\t1\t2\t25.3\t103.4\t50.75\n 2017\tstu1\tStudy Name\tloc1\tLocation Name\tCIP1\tCIP Name\tabc124\t1\t1\t1\t2017-06-16T00:54:57Z\tTest Entry\t2\t2\t27.9\t98.65\t45.345\n"
          headers: {}
          schema:
            properties:
              metadata:
                $ref: '#/definitions/metadata'
              result:
                $ref: '#/definitions/observationsTable'
            title: studyobservationsTableResponse
            type: object
      summary: Retrieve study Observation Units as table
      tags:
      - Studies
      - Observations
    post:
      description: ' This call can be used to create new observations in bulk.

        Note: If you need to update any existing observation, please use `PUT /studies/{studyDbId}/observations`. This call should only be used to create NEW observations.

        Implementation Guidelines:

        + All observations submitted through this call should create NEW observation records in the database under the given observation unit. + Each "observationUnitDbId" listed should already exist in the database. If the server can not find a given "observationUnitDbId", it should report an error. (see Error Handling) + The response of this call should be the set of "observationDbIds" created from this call, along with the associated "observationUnitDbId" and "observationVariableDbId" that each observation is associated with.

        Images can optionally be saved using this call by providing a zipped file of all images in the datafiles. The physical zipped file should be transferred as well in the mulit-part form data.

        Scope: PHENOTYPING '
      parameters:
      - description: Identifier of the study. Usually a number, could be alphanumeric.
        in: path
        name: studyDbId
        required: true
        type: string
      - in: body
        name: newObservationsTableRequest
        schema:
          $ref: '#/definitions/newObservationsTableRequest'
      responses:
        '200':
          description: OK
          examples:
            application/json:
              metadata:
                datafiles: []
                pagination:
                  currentPage: 0
                  pageSize: 0
                  totalCount: 0
                  totalPages: 0
                status: []
              result:
                observations:
                - observationDbId: '12345'
                  observationUnitDbId: '1'
                  observationVariableDbId: variable1DbId
                - observationDbId: '23456'
                  observationUnitDbId: '1'
                  observationVariableDbId: variable2DbId
                - observationDbId: '34567'
                  observationUnitDbId: '1'
                  observationVariableDbId: variable3DbId
                - observationDbId: '45678'
                  observationUnitDbId: '1'
                  observationVariableDbId: imagevariable1DbId
                - observationDbId: '56789'
                  observationUnitDbId: '2'
                  observationVariableDbId: variable1DbId
                - observationDbId: '67890'
                  observationUnitDbId: '2'
                  observationVariableDbId: variable2DbId
                - observationDbId: '78901'
                  observationUnitDbId: '2'
                  observationVariableDbId: variable3DbId
                - observationDbId: '89012'
                  observationUnitDbId: '2'
                  observationVariableDbId: imagevariable1DbId
          headers: {}
          schema:
            properties:
              metadata:
                $ref: '#/definitions/metadata'
              result:
                $ref: '#/definitions/newObservationDbIds'
            title: newObservationDbIdsResponse
            type: object
      summary: Save study Observation Units as table
      tags:
      - Studies
      - Observations
swagger: '2.0'
