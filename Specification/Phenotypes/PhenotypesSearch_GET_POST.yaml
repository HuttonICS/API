paths:
  /phenotypes-search:
    get:
      description: "Scope: PHENOTYPING.\nStatus: ACCEPTED.\n\nReturns a list of observationUnit with the observed Phenotypes.\n\nSee <a href=\"#introduction/search-services\">Search Services</a> for additional implementation details.\n\nImplemented for GnpIS and PHIS data (https://urgi.versailles.inra.fr/ws/webresources/brapi/v1/phenotypes). \nUse case: this section allows to get a dataset from multiple studies. It allows to integrate data from several databases.\nRefactor note : This call allows to get and integrate portions of multiple phenotyping data matrixes. A proposed evolution allowed to get a list of single observations, this functionality is still possible with this call by specifybing the observation variable, see below.\nExample Use cases:\n- Study a panel of germplasm accross multiple studies, search parameters : {\"germplasmDbIds\" : [ \"Syrah\", \"34Mtp362\" ]}\n- Get all data for a specific study : {\"studyDbIds\" : [ \"383\" ]}\n- Get simple atomic phenotyping values : {\"germplasmDbIds\" : [ \"Syrah\", \"34Mtp362\" ], \"observationVariableDbIds\" : [ \"CO_345:0000043\"]}\n- Study Locations for adaptation to climat change : {\"locationDbIds\" : [ \"383838\", \"MONTPELLIER\" ], \"germplasmDbIds\" : [ \"all ids for a given species\"]}\n- Find phenotypes that are from after a certain timestamp\n\nobservationTimeStamp : Iso Standard 8601.\n\nobservationValue data type inferred from the ontology"
      parameters:
      - description: The name or synonym of external genebank accession identifiers
        in: query
        name: germplasmDbId
        required: false
        type: string
      - description: The ID of traits, could be ontology ID, database ID or PUI
        in: query
        name: observationVariableDbId
        required: false
        type: string
      - description: The database ID / PK of the studies search parameter
        in: query
        name: studyDbId
        required: false
        type: string
      - description: locations these traits were collected
        in: query
        name: locationDbId
        required: false
        type: string
      - description: trial to search across
        in: query
        name: trialDbId
        required: false
        type: string
      - description: program that have phenotyped this trait
        in: query
        name: programDbId
        required: false
        type: string
      - description: The year or Phenotyping campaign of a multi-annual study (trees, grape, ...)
        in: query
        name: seasonDbId
        required: false
        type: string
      - description: The type of the observationUnit. Returns only the observation unit of the specified type; the parent levels ID can be accessed through observationUnitStructure.
        in: query
        name: observationLevel
        required: false
        type: string
      - description: Timestamp range start
        format: date-time
        in: query
        name: observationTimeStampRangeStart
        required: false
        type: string
      - description: Timestamp range end
        format: date-time
        in: query
        name: observationTimeStampRangeEnd
        required: false
        type: string
      - description: The size of the pages to be returned. Default is 1000.
        in: query
        name: pageSize
        required: false
        type: integer
      - description: Which result page is requested. The page indexing starts at 0 (the first page is 'page'= 0). Default is 0.
        in: query
        name: page
        required: false
        type: integer
      produces:
      - application/json
      responses:
        '200':
          description: OK
          examples:
            application/json:
              metadata:
                datafiles: []
                pagination:
                  currentPage: 0
                  pageSize: 100
                  totalCount: 2
                  totalPages: 1
                status: []
              result:
                data:
                - X: '5'
                  Y: '15'
                  blockNumber: '2'
                  entryNumber: '4'
                  entryType: check
                  germplasmDbId: doi:10.155454/12349537E12
                  germplasmName: IR-8
                  observationLevel: plot
                  observationLevels: bloc:2,subBloc:1,plot:2016-Maugio-34-575-abc-123
                  observationUnitDbId: 2016-Maugio-34-575-abc-123
                  observationUnitName: 2016-Maugio-34-575
                  observationUnitXref:
                  - id: SAMEA179865230
                    source: biosampleEBI
                  - id: INRA:CoeSt6 _SMH03
                    source: gnpis.lot
                  - id: '239865'
                    source: kernelDB
                  observations:
                  - collector: Mr. Technician
                    observationDbId: '153453453'
                    observationTimeStamp: 2015-06-16 08:53:26
                    observationVariableDbId: CO_321:0000045
                    observationVariableName: Plant_height
                    season: '2015'
                    value: '45'
                  - collector: Mr. Technician
                    observationDbId: '23453454345'
                    observationTimeStamp: 2015-06-16 08:53:26
                    observationVariableDbId: CO_321:0000996
                    observationVariableName: GW100_g
                    season: '2015'
                    value: '3'
                  plantNumber: '0'
                  plotNumber: 2016-Maugio-34-575-abc-123
                  positionCoordinateX: '5'
                  positionCoordinateXType: GRID_COL
                  positionCoordinateY: '15'
                  positionCoordinateYType: GRID_ROW
                  programName: Whealbi
                  replicate: '0'
                  studyDbId: YieldStudy2015-5
                  studyLocation: Montpellier
                  studyLocationDbId: mtp-north-32
                  studyName: Yield wheat 2015
                  treatments:
                  - factor: water regimen
                    modality: water deficit
                - X: '6'
                  Y: '15'
                  blockNumber: '3'
                  entryNumber: '7'
                  entryType: test
                  germplasmDbId: doi:10.155499/12349537E00
                  germplasmName: ZE-45
                  observationLevel: plant
                  observationLevels: bloc:2,subBloc:1,plot:2016-Maugio-34-575-abc-123
                  observationUnitDbId: '45204'
                  observationUnitName: 2010-Cornell-37-99
                  observations:
                  - collector: Mr. Technician
                    observationDbId: '153453453'
                    observationTimeStamp: 2010-06-16 08:53:26
                    observationVariableDbId: CO_321:0000045
                    observationVariableName: Plant_height
                    season: '2010'
                    value: '45'
                  - collector: Mr. Technician
                    observationDbId: '23453454345'
                    observationTimeStamp: 2010-06-16 08:53:26
                    observationVariableDbId: CO_321:0000996
                    observationVariableName: GW100_g
                    season: '2010'
                    value: '3'
                  plantNumber: '45204'
                  plotNumber: 2016-Maugio-34-575-abc-123
                  positionCoordinateX: '6'
                  positionCoordinateXType: GRID_COL
                  positionCoordinateY: '15'
                  positionCoordinateYType: GRID_ROW
                  programName: Wheat for futur
                  replicate: '2'
                  studyDbId: YieldStudy2010-5
                  studyLocation: Cornell
                  studyLocationDbId: '88484'
                  studyName: Yield wheat 2010
                  treatments: []
          headers: {}
          schema:
            properties:
              metadata:
                $ref: '#/definitions/metadata'
              result:
                properties:
                  data:
                    items:
                      $ref: '#/definitions/observationUnitPhenotype'
                    type: array
                type: object
            title: observationUnitsResponse
            type: object
      summary: Phenotype Search
      tags:
      - Phenotypes
      - Search Services
    post:
      description: "Scope: PHENOTYPING.\nStatus: ACCEPTED.\n\nReturns a list of observationUnit with the observed Phenotypes.\n\nSee <a href=\"#introduction/search-services\">Search Services</a> for additional implementation details.\n\nImplemented for GnpIS and PHIS data (https://urgi.versailles.inra.fr/ws/webresources/brapi/v1/phenotypes). \nUse case: this section allows to get a dataset from multiple studies. It allows to integrate data from several databases.\nRefactor note : This call allows to get and integrate portions of multiple phenotyping data matrixes. A proposed evolution allowed to get a list of single observations, this functionality is still possible with this call by specifybing the observation variable, see below.\nExample Use cases:\n- Study a panel of germplasm accross multiple studies, search parameters : {\"germplasmDbIds\" : [ \"Syrah\", \"34Mtp362\" ]}\n- Get all data for a specific study : {\"studyDbIds\" : [ \"383\" ]}\n- Get simple atomic phenotyping values : {\"germplasmDbIds\" : [ \"Syrah\", \"34Mtp362\" ], \"observationVariableDbIds\" : [ \"CO_345:0000043\"]}\n- Study Locations for adaptation to climat change : {\"locationDbIds\" : [ \"383838\", \"MONTPELLIER\" ], \"germplasmDbIds\" : [ \"all ids for a given species\"]}\n- Find phenotypes that are from after a certain timestamp\n\nobservationTimeStamp : Iso Standard 8601.\n\nobservationValue data type inferred from the ontology"
      parameters:
      - in: body
        name: body
        schema:
          $ref: '#/definitions/phenotypesSearchRequest'
      produces:
      - application/json
      responses:
        '200':
          description: OK
          examples:
            application/json:
              metadata:
                datafiles: []
                pagination:
                  currentPage: 0
                  pageSize: 100
                  totalCount: 2
                  totalPages: 1
                status: []
              result:
                data:
                - X: '5'
                  Y: '15'
                  blockNumber: '2'
                  entryNumber: '4'
                  entryType: check
                  germplasmDbId: doi:10.155454/12349537E12
                  germplasmName: IR-8
                  observationLevel: plot
                  observationLevels: bloc:2,subBloc:1,plot:2016-Maugio-34-575-abc-123
                  observationUnitDbId: 2016-Maugio-34-575-abc-123
                  observationUnitName: 2016-Maugio-34-575
                  observationUnitXref:
                  - id: SAMEA179865230
                    source: biosampleEBI
                  - id: INRA:CoeSt6 _SMH03
                    source: gnpis.lot
                  - id: '239865'
                    source: kernelDB
                  observations:
                  - collector: Mr. Technician
                    observationDbId: '153453453'
                    observationTimeStamp: 2015-06-16 08:53:26
                    observationVariableDbId: CO_321:0000045
                    observationVariableName: Plant_height
                    season: '2015'
                    value: '45'
                  - collector: Mr. Technician
                    observationDbId: '23453454345'
                    observationTimeStamp: 2015-06-16 08:53:26
                    observationVariableDbId: CO_321:0000996
                    observationVariableName: GW100_g
                    season: '2015'
                    value: '3'
                  plantNumber: '0'
                  plotNumber: 2016-Maugio-34-575-abc-123
                  positionCoordinateX: '5'
                  positionCoordinateXType: GRID_COL
                  positionCoordinateY: '15'
                  positionCoordinateYType: GRID_ROW
                  programName: Whealbi
                  replicate: '0'
                  studyDbId: YieldStudy2015-5
                  studyLocation: Montpellier
                  studyLocationDbId: mtp-north-32
                  studyName: Yield wheat 2015
                  treatments:
                  - factor: water regimen
                    modality: water deficit
                - X: '6'
                  Y: '15'
                  blockNumber: '3'
                  entryNumber: '7'
                  entryType: test
                  germplasmDbId: doi:10.155499/12349537E00
                  germplasmName: ZE-45
                  observationLevel: plant
                  observationLevels: bloc:2,subBloc:1,plot:2016-Maugio-34-575-abc-123
                  observationUnitDbId: '45204'
                  observationUnitName: 2010-Cornell-37-99
                  observations:
                  - collector: Mr. Technician
                    observationDbId: '153453453'
                    observationTimeStamp: 2010-06-16 08:53:26
                    observationVariableDbId: CO_321:0000045
                    observationVariableName: Plant_height
                    season: '2010'
                    value: '45'
                  - collector: Mr. Technician
                    observationDbId: '23453454345'
                    observationTimeStamp: 2010-06-16 08:53:26
                    observationVariableDbId: CO_321:0000996
                    observationVariableName: GW100_g
                    season: '2010'
                    value: '3'
                  plantNumber: '45204'
                  plotNumber: 2016-Maugio-34-575-abc-123
                  positionCoordinateX: '6'
                  positionCoordinateXType: GRID_COL
                  positionCoordinateY: '15'
                  positionCoordinateYType: GRID_ROW
                  programName: Wheat for futur
                  replicate: '2'
                  studyDbId: YieldStudy2010-5
                  studyLocation: Cornell
                  studyLocationDbId: '88484'
                  studyName: Yield wheat 2010
                  treatments: []
          headers: {}
          schema:
            properties:
              metadata:
                $ref: '#/definitions/metadata'
              result:
                properties:
                  data:
                    items:
                      $ref: '#/definitions/observationUnitPhenotype'
                    type: array
                type: object
            title: observationUnitsResponse
            type: object
      summary: Phenotype Search
      tags:
      - Phenotypes
      - Search Services
swagger: '2.0'
