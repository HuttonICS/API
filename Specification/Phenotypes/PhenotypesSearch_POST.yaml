swagger: '2.0'
paths:
  /phenotypes-search:
    post:
      description: '
        Scope: PHENOTYPING.
        Status: ACCEPTED.
        
        Returns a list of observationUnit with the observed Phenotypes.
        
        See <a href="#introduction/search-services">Search Services</a> for additional implementation details.
        
        Implemented for GnpIS and PHIS data (https://urgi.versailles.inra.fr/ws/webresources/brapi/v1/phenotypes). 
        Use case: this section allows to get a dataset from multiple studies. It allows to integrate data from several databases.
        Refactor note : This call allows to get and integrate portions of multiple phenotyping data matrixes. A proposed evolution allowed to get a list of single observations, this functionality is still possible with this call by specifybing the observation variable, see below.
        Example Use cases:
        - Study a panel of germplasm accross multiple studies, search parameters : {"germplasmDbIds" : [ "Syrah", "34Mtp362" ]}
        - Get all data for a specific study : {"studyDbIds" : [ "383" ]}
        - Get simple atomic phenotyping values : {"germplasmDbIds" : [ "Syrah", "34Mtp362" ], "observationVariableDbIds" : [ "CO_345:0000043"]}
        - Study Locations for adaptation to climat change : {"locationDbIds" : [ "383838", "MONTPELLIER" ], "germplasmDbIds" : [ "all ids for a given species"]}
        - Find phenotypes that are from after a certain timestamp
      
        observationTimeStamp : Iso Standard 8601.

        observationValue data type inferred from the ontology'
      parameters: []
      produces:
      - application/json
      responses:
        '200':
          description: OK
          schema:
            title: observationUnitsResponse
            type: object
            properties:
              metadata:
                $ref: '#/definitions/metadata' 
              result:
                type: object
                properties:
                  data:
                    type: array
                    items: 
                      $ref: '#/definitions/observationUnitPhenotype' 
          examples:
            application/json:
              metadata:
                datafiles: []
                pagination:
                  currentPage: 0
                  pageSize: 100
                  totalCount: 2
                  totalPages: 1
                status: []
              result:
                data:
                - X: '5'
                  Y: '15'
                  blockNumber: '2'
                  entryNumber: '4'
                  entryType: check
                  germplasmDbId: doi:10.155454/12349537E12
                  germplasmName: IR-8
                  observationLevel: plot
                  observationLevels: bloc:2,subBloc:1,plot:2016-Maugio-34-575-abc-123
                  observationUnitDbId: 2016-Maugio-34-575-abc-123
                  observationUnitName: 2016-Maugio-34-575
                  observationUnitXref:
                  - id: SAMEA179865230
                    source: biosampleEBI
                  - id: INRA:CoeSt6 _SMH03
                    source: gnpis.lot
                  - id: '239865'
                    source: kernelDB
                  observations:
                  - collector: Mr. Technician
                    observationDbId: '153453453'
                    observationTimeStamp: 2015-06-16T00:53:26-08:00
                    observationVariableDbId: CO_321:0000045
                    observationVariableName: Plant_height
                    season: '2015'
                    value: '45'
                  - collector: Mr. Technician
                    observationDbId: '23453454345'
                    observationTimeStamp: 2015-06-16T00:53:26-08:00
                    observationVariableDbId: CO_321:0000996
                    observationVariableName: GW100_g
                    season: '2015'
                    value: '3'
                  plantNumber: '0'
                  plotNumber: 2016-Maugio-34-575-abc-123
                  programName: Whealbi
                  replicate: '0'
                  studyDbId: YieldStudy2015-5
                  studyLocation: Montpellier
                  studyLocationDbId: mtp-north-32
                  studyName: Yield wheat 2015
                  treatments:
                  - factor: water regimen
                    modality: water deficit
                - X: '6'
                  Y: '15'
                  blockNumber: '3'
                  entryNumber: '7'
                  entryType: test
                  germplasmDbId: doi:10.155499/12349537E00
                  germplasmName: ZE-45
                  observationLevel: plant
                  observationLevels: bloc:2,subBloc:1,plot:2016-Maugio-34-575-abc-123
                  observationUnitDbId: '45204'
                  observationUnitName: 2010-Cornell-37-99
                  observations:
                  - collector: Mr. Technician
                    observationDbId: '153453453'
                    observationTimeStamp: 2010-06-16T00:53:26-08:00
                    observationVariableDbId: CO_321:0000045
                    observationVariableName: Plant_height
                    season: '2010'
                    value: '45'
                  - collector: Mr. Technician
                    observationDbId: '23453454345'
                    observationTimeStamp: 2010-06-16T00:53:26-08:00
                    observationVariableDbId: CO_321:0000996
                    observationVariableName: GW100_g
                    season: '2010'
                    value: '3'
                  plantNumber: '45204'
                  plotNumber: 2016-Maugio-34-575-abc-123
                  programName: Wheat for futur
                  replicate: '2'
                  studyDbId: YieldStudy2010-5
                  studyLocation: Cornell
                  studyLocationDbId: '88484'
                  studyName: Yield wheat 2010
                  treatments: []
          headers: {}
      summary: Phenotype Search
      tags:
      - Phenotypes
      - Search Services
