## Call Search [/brapi/v1/calls]

Status: ACCEPTED

Implemented by: Germinate, Cassavabase

Used by: Flapjack

##### Response data types
|Variable|Datatype|Description|Required|
|------|------|------|:-----:|
|metadata|object|pagination, status|Y|
|pagination|object|pageSize, currentPage, totalCount, totalPages|Y|
|status|list|code, message|Y|
|datafiles|list|List of the data files generated by the call|Y|
|data|array of objects|Array (possibly empty) of call records|Y|
|call|string|The relative URL/path of the call as specified in the Apiary (e.g. "germplasm/{germplasmDbId}")|Y|
|datatypes|list|List of the data formats supported for data export, e.g. "json", "tsv", etc.|Y|
|methods|list|List of the HTTP methods supported by this call|Y|
|versions|list|List of BrAPI version numbers which this server supports for this particular call|Y|

**Note on the call response**

Having a consistent structure for the path string of each call is very important for teams to be able to connect and find errors. Read more on [Github](https://github.com/plantbreeding/API/issues/144).

Here are the rules for the path of each call that should be returned:
 - Every word in the call path should match the documentation exactly, both in spelling and capitalization. Note that path strings are all lower case, but path parameters are camel case.
 - Each path should start relative to '/brapi/v1/' and therefore should not include '/brapi/v1/'
 - No leading or trailing slashes ('/')
 - Path parameters are wrapped in curly braces ('{}'). The name of the path parameter should be spelled exactly as it is specified in the documentation.

|Examples||
|--|--|
| **GOOD** |"call": "germplasm/{germplasmDbId}/markerprofiles" |
| BAD |"call": "germplasm/{**id**}/markerprofiles" |
| BAD |"call": "germplasm/{germplasmDbId}/marker**P**rofiles" |
| BAD |"call": "germplasm/{germplasm**dbid**}/markerprofiles" |
| BAD |"call": "**/brapi/v1**/germplasm/{germplasmDbId}/markerprofiles" |
| BAD |"call": "**/g**ermplasm/{germplasmDbId}/markerprofiles **/"** |
| BAD |"call": "germplasm/**\<germplasmDbId\>**/markerprofiles" |


### Call search [GET /brapi/v1/calls{?datatype}{?pageSize}{?page}]
+ Parameters
   + datatype (optional, string, `tsv`) ... The data type supported by the call
   + pageSize (optional, integer, `1000`) ... The size of the pages to be returned. Default is `1000`.
   + page (optional, integer, `0`) ... Which result page is requested. The page indexing starts at 0 (the first page is 'page'= 0). Default is `0`.
+ Response 200 (application/json)

        {
            "metadata": {
                "pagination" : {
                "totalCount" : 8,
                "currentPage" : 0,
                "totalPages" : 1,
                "pageSize" : 1000
            },
            "datafiles" : []
            },
            "result" : {
                "data" : [
                    { "call": "token", "datatypes" : ["json"], "methods" : ["POST", "DELETE"], "versions":["1.0", "1.1"] },
                    { "call": "calls" , "datatypes" : ["json"], "methods" : ["GET"], "versions":["1.0", "1.1", "1.2"] },
                    { "call": "allelematrix", "datatypes": ["json", "tsv"], "methods": ["GET", "POST"], "versions":["1.0"] },
                    { "call": "observationLevels", "datatypes" : ["json"], "methods" : ["GET"], "versions":["1.0", "1.1", "1.2"] },
                    { "call": "germplasm-search", "datatypes" : ["json"], "methods" : ["GET", "POST"], "versions":["1.0", "1.1", "1.2"] },
                    { "call": "germplasm/{germplasmDbId}", "datatypes" : [ "json" ], "methods" : ["GET"], "versions":["1.0", "1.1", "1.2"] },      
                    { "call": "germplasm/{germplasmDbId}/pedigree", "datatypes" : ["json"], "methods" : ["GET"], "versions":["1.1", "1.2"] },
                    { "call": "germplasm/{germplasmDbId}/markerprofiles", "datatypes" : [ "json" ], "methods" : ["GET"], "versions":["1.1", "1.2"]}
                ]
            }
        }
